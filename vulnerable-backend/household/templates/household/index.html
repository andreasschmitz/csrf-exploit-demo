{% extends 'base.html' %}

{% load i18n %}


{% block content %}
<ul role="list" class="grid 2xl:grid-cols-3 lg:grid-cols-2 xs:grid-cols-1 gap-6">

{% for place in sleeping_places %}
    <li class="flex box-border border-solid rounded-lg {% if place.is_claimed_by_me %}border-[3px] border-yellow-400{% else %}border-[1px] border-slate{% endif %} overflow-hidden md:shadow-md hover:shadow-lg">
        <div class="flex-none w-36 sm:w-48 relative">
            <img class="absolute inset-0 w-full h-full object-cover" loading="lazy" src="{{ place.image.url }}"/>
        </div>
        <div class="flex-auto p-3 sm:p-6">
            <div class="pb-6 mb-6">
                <h2 class="text-xl font-medium">{{ place.name }}</h2>
                <div class="text-slate-500">
                    {% trans "coziness:" %} {{ place.get_coziness_factor_display }}
                </div>
                <div class="text-slate-500">
                    {% if place.is_claimed_by_me %}
                        {% trans "claimed by you" %}
                    {% elif place.claimed_by %}
                        {% trans "claimed by" %} {{ place.claimed_by.get_full_name }}
                    {% else %}
                        {% trans "not claimed" %}
                    {% endif %}
                </div>
                <!-- Just to make the attack script easier -->
                <div class="hidden">{{ place.name }} claimed by {{ place.claimed_by }}</div>
            </div>

            <div class="text-right">
                {% if not request.user.is_anonymous %}
                    {% if place.is_claimed_by_me %}
                        <a
                            class="ml-a px-5 py-3 text-white no-underline rounded-md bg-red-600 hover:bg-red-800 active:bg-red-900 focus:outline-none focus:ring focus:ring-red-300"
                            href="{% url 'household:insecure_get_leave_sleeping_place' place_id=place.pk %}"
                        >
                            {% trans "leave" %}
                        </a>
                    {% elif place.claimed_by is None %}
                        <a
                            class="px-5 py-3 text-white no-underline rounded-md bg-green-600 hover:bg-green-800 active:bg-green-900 focus:outline-none focus:ring focus:ring-green-300"
                            href="{% url 'household:insecure_claim_sleeping_place' place_id=place.pk %}"
                        >
                            {% trans "claim" %}
                        </a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </li>
{% endfor %}

<ul>
{% endblock content %}
